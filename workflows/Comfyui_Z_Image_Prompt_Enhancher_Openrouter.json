{"id":"91f6bbe2-ed41-4fd6-bac7-71d5b5864ecb","revision":0,"last_node_id":84,"last_link_id":151,"nodes":[{"id":75,"type":"ImageScaleToTotalPixels","pos":[-60,995],"size":[270,82],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":140},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[141,143]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"ImageScaleToTotalPixels"},"widgets_values":["area",1.68]},{"id":69,"type":"QwenImageDiffsynthControlnet","pos":[810,70],"size":[310,138],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":130},{"localized_name":"model_patch","name":"model_patch","type":"MODEL_PATCH","link":129},{"localized_name":"vae","name":"vae","type":"VAE","link":132},{"localized_name":"image","name":"image","type":"IMAGE","link":135},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[131]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"QwenImageDiffsynthControlnet"},"widgets_values":[1]},{"id":66,"type":"ModelSamplingAuraFlow","pos":[810,-40],"size":[310,58],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":149},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[130]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"ModelSamplingAuraFlow"},"widgets_values":[3.1000000000000005]},{"id":79,"type":"MarkdownNote","pos":[810,760],"size":[310,140],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"title":"KSampler settings","properties":{},"widgets_values":["You can test and find the best setting by yourself. The following table is for reference.\n\n| model            | steps | cfg |\n|---------------------|---------------|---------------|\n| fp8_e4m3fn             | 20                | 2.5               |\n| fp8_e4m3fn + 4 Steps lightning LoRA    | 4               | 1.0               |\n"],"color":"#432","bgcolor":"#653"},{"id":8,"type":"VAEDecode","pos":[810,950],"size":[310,46],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":128},{"localized_name":"vae","name":"vae","type":"VAE","link":76}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[110]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":76,"type":"VAEEncode","pos":[640,630],"size":[140,46],"flags":{"collapsed":true},"order":14,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":143},{"localized_name":"vae","name":"vae","type":"VAE","link":144}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[142]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"VAEEncode"},"widgets_values":[]},{"id":68,"type":"Note","pos":[810,-180],"size":[310,90],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Increase the shift if you get too many blury/dark/bad images. Decrease if you want to try increasing detail."],"color":"#432","bgcolor":"#653"},{"id":73,"type":"PreviewImage","pos":[340,770],"size":[380,320],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":136}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":72,"type":"Canny","pos":[340,630],"size":[240,90],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":141},{"localized_name":"low_threshold","name":"low_threshold","type":"FLOAT","widget":{"name":"low_threshold"},"link":null},{"localized_name":"high_threshold","name":"high_threshold","type":"FLOAT","widget":{"name":"high_threshold"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[135,136]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"Canny"},"widgets_values":[0.1,0.2],"color":"#322","bgcolor":"#533"},{"id":60,"type":"SaveImage","pos":[1150,-40],"size":[970,1030],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":110},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":80,"type":"LoraLoaderModelOnly","pos":[320,-10],"size":[430,82],"flags":{},"order":12,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":145},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[149]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"LoraLoaderModelOnly","models":[{"name":"Qwen-Image-Lightning-4steps-V1.0.safetensors","url":"https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors","directory":"loras"}]},"widgets_values":["Qwen-Image-Lightning-4steps-V1.0.safetensors",1]},{"id":6,"type":"CLIPTextEncode","pos":[300,170],"size":[460,164.31304931640625],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":150},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[46]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"CLIPTextEncode"},"widgets_values":["Conceptual makeup, a fairy girl with pink hair, pink shimmery scales dotted at the corners of her eyes, starry eyeshadow, makeup painting, thin eyebrows, three-dimensional features, a glossy finish, dazzling gold powder, silver fine glitter, a sense of layering and depth in the makeup, decorated with gold ornaments, pearlescent eyeshadow, dreamy makeup, soft pastels and subtle sparkles, a mysterious and fantasy-filled atmosphere, high-end makeup, dappled light on the face, soft lighting, optimal shadows, complex depth of field, dramatic lighting, clear focus, 8k, high quality, Fujifilm filter, surreal, a dreamy pastel wonderland, bright colors, a starry pink background, realistic.\n"],"color":"#232","bgcolor":"#353"},{"id":7,"type":"CLIPTextEncode","pos":[300,380],"size":[460,140],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":151},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[52]}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"CLIPTextEncode"},"widgets_values":[" "],"color":"#223","bgcolor":"#335"},{"id":78,"type":"MarkdownNote","pos":[-690,-50],"size":[540,630],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"title":"Model links","properties":{"widget_ue_connectable":{}},"widgets_values":["[Tutorial](https://docs.comfy.org/tutorials/image/qwen/qwen-image) \n\n\n## Model links\n\nYou can find all the models on [Huggingface](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/tree/main) or [Modelscope](https://modelscope.cn/models/Comfy-Org/Qwen-Image_ComfyUI/files)\n\n**Diffusion model**\n\n- [qwen_image_fp8_e4m3fn.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_fp8_e4m3fn.safetensors)\n\n**Model patches**\n\n- [qwen_image_canny_diffsynth_controlnet.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-DiffSynth-ControlNets/resolve/main/split_files/model_patches/qwen_image_canny_diffsynth_controlnet.safetensors)\n- [qwen_image_depth_diffsynth_controlnet.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-DiffSynth-ControlNets/resolve/main/split_files/model_patches/qwen_image_depth_diffsynth_controlnet.safetensors)\n- [qwen_image_inpaint_diffsynth_controlnet.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-DiffSynth-ControlNets/resolve/main/split_files/model_patches/qwen_image_inpaint_diffsynth_controlnet.safetensors)\n\n**LoRA**\n\n- [Qwen-Image-Lightning-4steps-V1.0.safetensors](https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors)\n\n**Text encoder**\n\n- [qwen_2.5_vl_7b_fp8_scaled.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors)\n\n**VAE**\n\n- [qwen_image_vae.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors)\n\n\nModel Storage Location\n\n```\nðŸ“‚ ComfyUI/\nâ”œâ”€â”€ ðŸ“‚ models/\nâ”‚   â”œâ”€â”€ ðŸ“‚ diffusion_models/\nâ”‚   â”‚   â”œâ”€â”€ qwen_image_fp8_e4m3fn.safetensors\nâ”‚   â”‚   â””â”€â”€ qwen_image_distill_full_fp8_e4m3fn.safetensors\nâ”‚   â”œâ”€â”€ ðŸ“‚ loras/\nâ”‚   â”‚   â””â”€â”€ Qwen-Image-Lightning-8steps-V1.0.safetensors\nâ”‚   â”œâ”€â”€ ðŸ“‚ model_patches/ # create one if you can't find it\nâ”‚   â”‚   â”œâ”€â”€ qwen_image_depth_diffsynth_controlnet.safetensors\nâ”‚   â”‚   â”œâ”€â”€ qwen_image_canny_diffsynth_controlnet.safetensors\nâ”‚   â”‚   â””â”€â”€ qwen_image_inpaint_diffsynth_controlnet.safetensors\nâ”‚   â”œâ”€â”€ ðŸ“‚ vae/\nâ”‚   â”‚   â””â”€â”€ qwen_image_vae.safetensors\nâ”‚   â””â”€â”€ ðŸ“‚ text_encoders/\nâ”‚       â””â”€â”€ qwen_2.5_vl_7b_fp8_scaled.safetensors\n```\n"],"color":"#432","bgcolor":"#653"},{"id":70,"type":"ModelPatchLoader","pos":[-120,130],"size":[380,60],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"name","name":"name","type":"COMBO","widget":{"name":"name"},"link":null}],"outputs":[{"localized_name":"MODEL_PATCH","name":"MODEL_PATCH","type":"MODEL_PATCH","links":[129]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"ModelPatchLoader","models":[{"name":"qwen_image_canny_diffsynth_controlnet.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image-DiffSynth-ControlNets/resolve/main/split_files/model_patches/qwen_image_canny_diffsynth_controlnet.safetensors","directory":"model_patches"}]},"widgets_values":["Z-Image-Turbo-Fun-Controlnet-Union.safetensors"]},{"id":39,"type":"VAELoader","pos":[-120,400],"size":[380,58],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[76,132,144]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"VAELoader","models":[{"name":"qwen_image_vae.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors","directory":"vae"}]},"widgets_values":["taef1"]},{"id":71,"type":"LoadImage","pos":[-70,635],"size":[274.080078125,314.00006103515625],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[140]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"LoadImage"},"widgets_values":["input.png","image"]},{"id":84,"type":"CLIPLoaderGGUF","pos":[-437.6751587270103,638.5622061636069],"size":[270,82],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[150,151]}],"properties":{"cnr_id":"ComfyUI-GGUF","ver":"01f8845bf30d89fff293c7bd50187bc59d9d53ea","Node name for S&R":"CLIPLoaderGGUF"},"widgets_values":["Qwen3-4B-Q8_0.gguf","lumina2"]},{"id":38,"type":"CLIPLoader","pos":[-120,240],"size":[380,106],"flags":{},"order":7,"mode":4,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"CLIPLoader","models":[{"name":"qwen_2.5_vl_7b_fp8_scaled.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors","directory":"text_encoders"}]},"widgets_values":["qwen_2.5_vl_7b_fp8_scaled.safetensors","qwen_image","default"]},{"id":3,"type":"KSampler","pos":[810,260],"size":[310,430],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":131},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":46},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":52},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":142},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[128]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"KSampler"},"widgets_values":[91832422759220,"randomize",10,1,"euler","ddim_uniform",1]},{"id":37,"type":"UNETLoader","pos":[-120,0],"size":[380,82],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[145]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"UNETLoader","models":[{"name":"qwen_image_fp8_e4m3fn.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_fp8_e4m3fn.safetensors","directory":"diffusion_models"}]},"widgets_values":["zImageTurboQuantized_fp8ScaledE4m3fnKJ.safetensors","fp8_e4m3fn_fast"]}],"links":[[46,6,0,3,1,"CONDITIONING"],[52,7,0,3,2,"CONDITIONING"],[76,39,0,8,1,"VAE"],[110,8,0,60,0,"IMAGE"],[128,3,0,8,0,"LATENT"],[129,70,0,69,1,"MODEL_PATCH"],[130,66,0,69,0,"MODEL"],[131,69,0,3,0,"MODEL"],[132,39,0,69,2,"VAE"],[135,72,0,69,3,"IMAGE"],[136,72,0,73,0,"IMAGE"],[140,71,0,75,0,"IMAGE"],[141,75,0,72,0,"IMAGE"],[142,76,0,3,3,"LATENT"],[143,75,0,76,0,"IMAGE"],[144,39,0,76,1,"VAE"],[145,37,0,80,0,"MODEL"],[149,80,0,66,0,"MODEL"],[150,84,0,6,0,"CLIP"],[151,84,0,7,0,"CLIP"]],"groups":[{"id":1,"title":"Step 1 - Upload models","bounding":[-130,-80,400,610],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Step 2 - Upload reference image","bounding":[-130,550,400,550],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Image processing","bounding":[290,550,490,550],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Step 3 - Prompt","bounding":[290,100,490,430],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"4 steps lightning LoRA","bounding":[290,-80,490,160],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.70342530172941,"offset":[215.14099345207813,98.55655272362182]},"frontendVersion":"1.27.10","workflowRendererVersion":"LG"},"version":0.4}